(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37679,e=>{"use strict";e.s(["default",()=>r]);var t=e.i(91231);function r(){return(0,t.jsx)("div",{className:"min-h-screen py-8 sm:py-12",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("div",{className:"animate-pulse text-gray-600",children:"Loading products..."})})})})}},70558,13270,e=>{"use strict";e.s(["default",()=>i],70558);var t=e.i(91231),r=e.i(94696);e.s(["default",()=>s],13270);class a{static getInstance(){return a.instance||(a.instance=new a),a.instance}async submitReview(e){try{let t=await fetch("/api/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e={};try{let r=await t.json();Object.assign(e,r)}catch(r){e.error=t.statusText}return{success:!1,error:e.error||"HTTP ".concat(t.status),details:e.errors}}return await t.json()}catch(e){return{success:!1,error:e instanceof Error?e.message:"Network error"}}}async getReviews(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"newest",r=arguments.length>2?arguments[2]:void 0;try{let a=new URLSearchParams({productId:e,sortBy:t});r&&a.append("filterRating",r.toString());let s=await fetch("/api/reviews?".concat(a),{method:"GET"});if(!s.ok){let e={};try{let t=await s.json();"error"in t&&(e.error=t.error)}catch(t){e.error=s.statusText}return{success:!1,error:e.error||"HTTP ".concat(s.status)}}return await s.json()}catch(e){return{success:!1,error:e instanceof Error?e.message:"Network error"}}}async voteHelpful(e,t,r){try{let a=await fetch("/api/reviews",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reviewId:e,productId:t,isHelpful:r})});if(!a.ok){let e={};try{let t=await a.json();"error"in t&&(e.error=t.error)}catch(t){e.error=a.statusText}return{success:!1,error:e.error||"HTTP ".concat(a.status)}}return await a.json()}catch(e){return{success:!1,error:e instanceof Error?e.message:"Network error"}}}constructor(){}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(a,"instance",void 0);let s=a.getInstance();function i(e){let{productId:a,productName:i,onSubmit:o,onCancel:n}=e,[l,d]=(0,r.useState)(0),[c,m]=(0,r.useState)(0),[u,g]=(0,r.useState)(""),[p,h]=(0,r.useState)(""),[f,x]=(0,r.useState)(""),[y,v]=(0,r.useState)(""),[w,j]=(0,r.useState)(!1),[b,N]=(0,r.useState)(null),[P,S]=(0,r.useState)(null),[C,k]=(0,r.useState)(!1),L=async e=>{if(e.preventDefault(),S(null),k(!1),0===l||!u.trim()||!p.trim()||!f.trim())return void S("Please fill in all required fields and provide a rating.");j(!0);try{let e=await s.submitReview({productId:a,userName:f.trim(),rating:l,title:u.trim(),content:p.trim(),location:y.trim()||void 0,verifiedPurchase:!1});if(e.success&&e.review){k(!0),N(e.review);let t={productId:a,userId:e.review.userId||"user_".concat(Date.now()),userName:e.review.userName,rating:e.review.rating,title:e.review.title,content:e.review.content,location:e.review.location,verifiedPurchase:e.review.verifiedPurchase};o(t),d(0),g(""),h(""),x(""),v(""),setTimeout(()=>{k(!1),n()},2e3)}else S(e.error||"Failed to submit review")}catch(e){S(e instanceof Error?e.message:"An unexpected error occurred")}finally{j(!1)}};return(0,t.jsxs)("div",{className:"bg-white border rounded-lg p-6 shadow-sm",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:["Write a Customer Review for ",i]}),C&&(0,t.jsx)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:(0,t.jsx)("p",{className:"text-green-800 font-medium",children:"✓ Review submitted successfully!"})}),P&&(0,t.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:(0,t.jsxs)("p",{className:"text-red-800 font-medium",children:["✗ ",P]})}),(0,t.jsxs)("form",{onSubmit:L,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Overall Rating ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(()=>(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[[1,2,3,4,5].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{d(e)},onMouseEnter:()=>m(e),onMouseLeave:()=>m(0),className:"focus:outline-none",children:(0,t.jsx)("svg",{className:"w-8 h-8 transition-colors ".concat(e<=(c||l)?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},e)),(0,t.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:l>0&&(0,t.jsxs)(t.Fragment,{children:[l," out of 5 stars",1===l&&" - Poor",2===l&&" - Fair",3===l&&" - Good",4===l&&" - Very Good",5===l&&" - Excellent"]})})]}),{})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:["Add a headline ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",id:"title",value:u,onChange:e=>g(e.target.value),placeholder:"What's most important to know?",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",maxLength:100,required:!0}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[u.length,"/100 characters"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:["Add a written review ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("textarea",{id:"content",value:p,onChange:e=>h(e.target.value),placeholder:"What did you like or dislike? What did you use this product for?",rows:6,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",maxLength:1e3,required:!0}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[p.length,"/1000 characters"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"userName",className:"block text-sm font-medium text-gray-700 mb-2",children:["Your Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",id:"userName",value:f,onChange:e=>x(e.target.value),placeholder:"Enter your name",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-2",children:"Location (optional)"}),(0,t.jsx)("input",{type:"text",id:"location",value:y,onChange:e=>v(e.target.value),placeholder:"City, State",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t",children:[(0,t.jsx)("button",{type:"button",onClick:n,className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",disabled:w,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:w||0===l||!u.trim()||!p.trim()||!f.trim(),className:"px-6 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:w?"Submitting...":"Submit Review"})]})]}),b&&(0,t.jsxs)("div",{className:"mt-8 p-4 bg-gray-50 border rounded",children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Submitted Review (JSON Format):"}),(0,t.jsx)("pre",{className:"text-xs bg-white p-2 rounded overflow-x-auto border",children:JSON.stringify(b,null,2)})]})]})}},43752,e=>{"use strict";e.s(["products",()=>t]);let t=[{id:"1",name:"Chicken Pickle",description:"Authentic Andhra Chicken Pickle made with traditional spices and pure oil",category:"Pickles",image:"/products/1N8A7839.JPG",additionalImages:["/products/1N8A7840.JPG","/products/1N8A7841.JPG"],tags:["spicy","traditional","andhra style","non-veg"],ingredients:["Chicken","Mustard Oil","Red Chili Powder","Salt","Turmeric","Fenugreek Seeds","Mustard Seeds"],storageInfo:"Store in a cool, dry place. Keep away from direct sunlight.",shelfLife:"4 months from manufacturing date"},{id:"2",name:"Mutton Pickle",description:"Authentic Andhra Mutton Pickle prepared with tender mutton pieces, traditional spices, and pure oil",category:"Pickles",image:"/products/1N8A7842.JPG",additionalImages:["/products/1N8A7843.JPG","/products/1N8A7844.JPG"],tags:["spicy","traditional","andhra style","non-veg"],ingredients:["Mutton","Mustard Oil","Red Chili Powder","Salt","Turmeric","Fenugreek Seeds","Mustard Seeds","Garlic"],storageInfo:"Store in a cool, dry place. Keep away from direct sunlight.",shelfLife:"4 months from manufacturing date"},{id:"3",name:"Dosa Batter",description:"Fresh ground Dosa Batter made with premium rice and urad dal",category:"Batters",image:"/products/IMG-20251206-WA0013.jpg",additionalImages:["/products/1N8A7837.JPG","/products/1N8A7806.JPG"],tags:["fresh","fermented","breakfast","veg"],ingredients:["Rice","Urad Dal","Fenugreek Seeds","Salt"],storageInfo:"Keep refrigerated at 4°C",shelfLife:"9 days from manufacturing date"},{id:"4",name:"Idli Batter",description:"Idli Batter prepared with perfect proportions for soft and fluffy idlis",category:"Batters",image:"/products/IMG-20251206-WA0014.jpg",additionalImages:["/products/1N8A7798.JPG","/products/1N8A7809.JPG"],tags:["fresh","fermented","breakfast","veg"],ingredients:["Rice","Urad Dal","Fenugreek Seeds","Salt"],storageInfo:"Keep refrigerated at 4°C",shelfLife:"9 days from manufacturing date"},{id:"5",name:"Idli Dosa Batter",description:"Idli Dosa Batter prepared with perfect proportions for soft and fluffy idlis",category:"Batters",image:"/products/IMG-20251210-WA0013.jpg",additionalImages:["/products/1N8A7803.JPG","/products/1N8A7820.JPG"],tags:["fresh","fermented","breakfast","veg"],ingredients:["Rice","Urad Dal","Fenugreek Seeds","Salt"],storageInfo:"Keep refrigerated at 4°C",shelfLife:"9 days from manufacturing date"},{id:"6",name:"ragi Dosa Batter",description:"ragi Dosa Batter prepared with perfect proportions for soft and fluffy ragi",category:"Batters",image:"/products/IMG-20251210-WA0014.jpg",additionalImages:["/products/1N8A7796.JPG","/products/1N8A7824.JPG"],tags:["fresh","fermented","breakfast","veg"],ingredients:["Rice","Urad Dal","Fenugreek Seeds","Salt"],storageInfo:"Keep refrigerated at 4°C",shelfLife:"9 days from manufacturing date"},{id:"7",name:"Jeera Powder",description:"Jeera Powder made from premium roasted cumin seeds for rich aroma and flavor",category:"Powders",image:"/products/1N8A7830.JPG",additionalImages:["/products/1N8A7831.JPG","/products/1N8A7832.JPG"],tags:["spices","single spice","aromatic"],ingredients:["Cumin Seeds"],storageInfo:"Store in an airtight container in a cool, dry place",shelfLife:"6 months from manufacturing date"},{id:"8",name:"Dhaniyalu Powder",description:"Dhaniyalu (Coriander) Powder made from premium roasted coriander seeds for a fresh and aromatic flavor",category:"Powders",image:"/products/1N8A7833.JPG",additionalImages:["/products/1N8A7834.JPG","/products/1N8A7835.JPG"],tags:["spices","single spice","aromatic"],ingredients:["Coriander Seeds"],storageInfo:"Store in an airtight container in a cool, dry place",shelfLife:"6 months from manufacturing date"},{id:"9",name:"Sambar Powder",description:"Sambar Powder made with roasted spices and lentils",category:"Powders",image:"/products/Sambar-Powder-Recipe.jpg",additionalImages:["/products/dummy.png","/products/dummy.png"],tags:["spices","blend","authentic"],ingredients:["Coriander","Red Chilies","Turmeric","Cumin","Fenugreek","Black Pepper","Curry Leaves"],storageInfo:"Store in an airtight container in a cool, dry place",shelfLife:"6 months from manufacturing date"},{id:"10",name:"Rasam Powder",description:"Rasam Powder blended with handpicked spices for authentic taste",category:"Powders",image:"/products/rasam-powder-recipe-1.jpg",additionalImages:["/products/dummy.png","/products/dummy.png"],tags:["spices","blend","authentic"],ingredients:["Black Pepper","Cumin","Coriander","Red Chilies","Garlic","Curry Leaves"],storageInfo:"Store in an airtight container in a cool, dry place",shelfLife:"6 months from manufacturing date"},{id:"11",name:"Curry Powder",description:"Special Curry Powder perfect for vegetable and meat dishes",category:"Powders",image:"/products/curry-powder.jpg",additionalImages:["/products/dummy.png","/products/dummy.png"],tags:["spices","blend","versatile"],ingredients:["Coriander","Cumin","Turmeric","Red Chilies","Black Pepper","Cardamom","Cinnamon"],storageInfo:"Store in an airtight container in a cool, dry place",shelfLife:"6 months from manufacturing date"},{id:"12",name:"Mango Pickle",description:"Authentic Andhra Mango Pickle made with traditional spices and pure oil",category:"Pickles",image:"/products/mango-pickle-6.jpg",additionalImages:["/products/dummy.png","/products/dummy.png"],tags:["spicy","traditional","andhra style","veg"],ingredients:["Raw Mangoes","Mustard Oil","Red Chili Powder","Salt","Turmeric","Fenugreek Seeds","Mustard Seeds"],storageInfo:"Store in a cool, dry place. Keep away from direct sunlight.",shelfLife:"4 months from manufacturing date"},{id:"13",name:"Lime Pickle",description:"Spicy Lime Pickle with a perfect blend of spices",category:"Pickles",image:"/products/lime-pickle-12.jpg",additionalImages:["/products/dummy.png","/products/dummy.png"],tags:["mixed veg","spicy","traditional","veg"],ingredients:["Mixed Vegetables","Mustard Oil","Red Chili Powder","Salt","Turmeric","Spices"],storageInfo:"Store in a cool, dry place. Keep away from direct sunlight.",shelfLife:"4 months from manufacturing date"},{id:"14",name:"Gongura Pickle",description:"Homestyle Gongura Pickle, a traditional Andhra delicacy",category:"Pickles",image:"/products/GonguraRedChilli_2.png",additionalImages:["/products/dummy.png","/products/dummy.png"],tags:["gongura","andhra style","traditional","veg"],ingredients:["Gongura Leaves","Red Chili Powder","Salt","Garlic","Oil","Spices"],storageInfo:"Store in a cool, dry place. Keep away from direct sunlight.",shelfLife:"4 months from manufacturing date"}]},23017,e=>{"use strict";e.s(["default",()=>m],23017);var t=e.i(91231),r=e.i(94696),a=e.i(23664),s=e.i(60283),i=e.i(70558);let o=e=>{let{rating:r,size:a="sm"}=e,s={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},i=Math.floor(r),o=r-i>=.25&&r-i<.75;return(0,t.jsxs)("div",{className:"flex items-center",children:[[...Array(i)].map((e,r)=>(0,t.jsx)("svg",{className:"".concat(s[a]," text-yellow-400"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},"full-".concat(r))),o&&(0,t.jsxs)("svg",{className:"".concat(s[a]," text-yellow-400"),fill:"currentColor",viewBox:"0 0 20 20",children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"half-grad",x1:"0",x2:"100%",y1:"0",y2:"0",children:[(0,t.jsx)("stop",{offset:"50%",stopColor:"#facc15"}),(0,t.jsx)("stop",{offset:"50%",stopColor:"#d1d5db"})]})}),(0,t.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z",fill:"url(#half-grad)"})]},"half"),[...Array(5-i-!!o)].map((e,r)=>(0,t.jsx)("svg",{className:"".concat(s[a]," text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},"empty-".concat(r)))]})},n=e=>{let{product:n,reviews:l,addReview:d,variant:c="grid"}=e,{name:m,description:u,category:g,image:p,id:h}=n,f=(0,s.useRouter)(),[x,y]=(0,r.useState)(!1),[v,w]=(0,r.useState)(!1),j=l.length>0?l.reduce((e,t)=>e+t.rating,0)/l.length:0,b=l.length,N=()=>{f.push("/products/".concat(h))},P=()=>{y(!0)};return"list"===c?(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 p-4 bg-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 cursor-pointer transform hover:scale-[1.02]",itemScope:!0,itemType:"https://schema.org/Product",children:[(0,t.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify({"@context":"https://schema.org","@type":"Product",name:m,description:u,category:g,image:p,brand:{"@type":"Brand",name:"Raaga Foods"}})}}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)("div",{className:"relative w-full md:w-32 aspect-square",children:(0,t.jsx)(a.default,{src:x?"/products/placeholder.jpg":p||"/products/placeholder.jpg",alt:"".concat(m," - ").concat(g," from Raaga Foods"),fill:!0,className:"rounded-lg object-cover transition-transform duration-300 hover:scale-110",sizes:"(max-width: 768px) 100vw, 128px",priority:!0,onError:P,itemProp:"image"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"flex justify-between items-start",children:(0,t.jsx)("span",{className:"inline-block px-2 py-1 text-sm bg-orange-100 text-orange-600 rounded-full",itemProp:"category",children:g})}),(0,t.jsx)("h3",{className:"mt-2 text-lg font-semibold text-gray-800",itemProp:"name",children:m}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",itemProp:"description",children:u}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,t.jsx)(o,{rating:j,size:"sm"}),(0,t.jsx)("span",{className:"text-sm text-gray-800 font-semibold",children:j.toFixed(1)}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["(",b," ",1===b?"review":"reviews",")"]}),(0,t.jsx)("button",{className:"ml-2 text-xs text-orange-600 underline hover:text-orange-800",onClick:()=>w(!0),type:"button",children:"Write Review"})]}),v&&(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(i.default,{productId:h,productName:m,onSubmit:e=>{d({...e,id:"user_review_".concat(Date.now()),createdAt:new Date().toISOString(),helpfulVotes:0,totalVotes:0}),w(!1),alert("Thank you! Your review has been submitted successfully.")},onCancel:()=>w(!1)})})]})]}):(0,t.jsxs)("div",{className:"group bg-white rounded-lg shadow-md hover:shadow-xl transition-all duration-300 relative overflow-hidden cursor-pointer transform hover:scale-[1.02] max-w-5xl mx-auto px-4 py-12",onClick:N,role:"button",tabIndex:0,onKeyPress:e=>"Enter"===e.key&&N(),itemScope:!0,itemType:"https://schema.org/Product",children:[(0,t.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify({"@context":"https://schema.org","@type":"Product",name:m,description:u,category:g,image:p,brand:{"@type":"Brand",name:"Raaga Foods"}})}}),(0,t.jsx)("div",{className:"relative w-full aspect-square overflow-hidden ",children:(0,t.jsx)(a.default,{src:x?"/products/placeholder.jpg":p||"/products/placeholder.jpg",alt:"".concat(m," - ").concat(g," from Raaga Foods"),fill:!0,className:"rounded-t-lg object-cover transform group-hover:scale-110 transition-transform duration-500",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",priority:!0,onError:P,itemProp:"image"})}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,t.jsx)("span",{className:"inline-block px-2 py-1 text-sm bg-orange-100 text-orange-600 rounded-full",itemProp:"category",children:g})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",itemProp:"name",children:m}),(0,t.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 group-hover:text-orange-600 transition-colors duration-300",itemProp:"description",children:u}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,t.jsx)(o,{rating:j,size:"sm"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-800",children:j.toFixed(1)}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["(",b," ",1===b?"review":"reviews",")"]})]}),v&&(0,t.jsx)("div",{className:"mt-4",onClick:e=>e.stopPropagation()}),(0,t.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100 transform opacity-0 max-h-0 group-hover:max-h-20 group-hover:opacity-100 transition-all duration-300",children:(0,t.jsx)("div",{className:"flex justify-between items-center"})})]})]})};var l=e.i(38396),d=e.i(43752),c=e.i(13270);function m(e){var a,s,i,o,m;let{selectedCategory:u}=e,{searchQuery:g}=(0,l.useSearch)(),[p,h]=(0,r.useState)([]),[f,x]=(0,r.useState)(!1),[y,v]=(0,r.useState)(8),[w,j]=(0,r.useState)([]),[b,N]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{try{let t=[];for(let r of d.products)try{var e;let a=await c.default.getReviews(r.id);a.success&&(null==(e=a.data)?void 0:e.reviews)&&(t=t.concat(a.data.reviews))}catch(e){console.error("Failed to load reviews for product ".concat(r.id,":"),e)}N(t)}catch(e){console.error("Failed to load all reviews:",e)}})()},[]);let P=e=>{N(t=>[e,...t])};(0,r.useEffect)(()=>{v(8)},[g,u]),(0,r.useEffect)(()=>{x(!!g.trim());let e=Array.from(new Map(d.products.map(e=>[e.id,e])).values());if(console.log("Initial products loaded:",e.length),u&&console.log("After category filter:",(e="veg"===u.toLowerCase()?e.filter(e=>{var t;return!((null==(t=e.tags)?void 0:t.some(e=>"non-veg"===e.toLowerCase()))||e.name.toLowerCase().includes("chicken")||e.name.toLowerCase().includes("mutton")||e.name.toLowerCase().includes("fish"))}):"non-veg"===u.toLowerCase()?e.filter(e=>{var t;return(null==(t=e.tags)?void 0:t.some(e=>e.toLowerCase().includes("non-veg")))||e.name.toLowerCase().includes("non-veg")||e.description.toLowerCase().includes("non-vegetarian")}):e.filter(e=>e.category===u)).length,"for category:",u),g.trim()){let t=g.toLowerCase(),r=t.split(" ").filter(e=>e.length>0);(e=(e=Array.from(new Map(e.map(e=>[e.id,e])).values())).filter(e=>{let t=e.name.toLowerCase();return r.every(e=>t.includes(e))})).sort((e,a)=>{let s=e.name.toLowerCase(),i=a.name.toLowerCase();if(s===t)return -1;if(i===t)return 1;let o=s.startsWith(r[0]),n=i.startsWith(r[0]);return o&&!n?-1:!o&&n?1:s.localeCompare(i)}),console.log("After search filter:",e.length,"for query:",g)}console.log("Final filtered products:",e.length),j(e),h([{category:"All Products",items:e.slice(0,y)}])},[y,g,u]);let S=w.length>y;return(console.log("ProductsList state:",{displayCount:y,allProductsLength:w.length,hasMoreProducts:S,searchResultsLength:null==(a=p[0])?void 0:a.items.length}),0!==p.length||g||u)?(0,t.jsxs)("div",{className:"w-full",children:[(f||u)&&(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)("h3",{className:"text-lg text-gray-600 mb-2",children:f?(null==(s=p[0])?void 0:s.items.length)>0?(0,t.jsxs)("span",{children:[(0,t.jsx)("strong",{children:p[0].items.length})," ",1===p[0].items.length?"product":"products"," matching “",(0,t.jsx)("strong",{children:g}),"”",u?" in ".concat(u):""]}):(0,t.jsxs)(t.Fragment,{children:["No products found matching “",g,"”"]}):u?"Showing ".concat((null==(i=p[0])?void 0:i.items.length)||0," products in ").concat(u):null})}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4  gap-4 sm:gap-6 ",children:null==(o=p[0])?void 0:o.items.map(e=>{let r;return(0,t.jsx)("div",{className:"w-full ",children:(0,t.jsx)(n,{product:e,reviews:(r=e.id,b.filter(e=>e.productId===r)),addReview:P})},e.id)})}),S&&(0,t.jsxs)("div",{className:"flex justify-between items-center mt-8",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["Showing ",(null==(m=p[0])?void 0:m.items.length)||0," of ",w.length," products"]}),(0,t.jsxs)("button",{onClick:()=>{v(e=>{let t=e+8;return console.log("Loading more products:",{prev:e,newCount:t,totalProducts:w.length}),t})},className:"px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors duration-300 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"Load More"}),(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]})]})]}):(0,t.jsx)("div",{className:"w-full text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-600 text-lg animate-pulse",children:"Loading products..."})})}},35813,e=>{"use strict";e.s(["default",()=>o]);var t=e.i(91231),r=e.i(60283),a=e.i(94696),s=e.i(23017),i=e.i(37679);function o(){let e=(0,r.useSearchParams)().get("category"),[o,n]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{if(!o&&document.referrer.includes("/products/")){let e=document.querySelector("nav"),t=e?e.getBoundingClientRect().height:0;window.scrollTo({top:Math.max(0,window.scrollY-t-16),behavior:"smooth"}),n(!0)}},[o]),(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(i.default,{}),children:(0,t.jsx)("div",{className:"min-h-screen py-8 sm:py-12",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-800",children:e?"".concat(e," Products"):"All Products"})}),(0,t.jsx)(s.default,{selectedCategory:e||void 0})]})})})})}}]);