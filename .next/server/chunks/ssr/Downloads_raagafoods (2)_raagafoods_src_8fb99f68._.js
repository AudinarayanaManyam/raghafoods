module.exports=[54522,a=>{"use strict";a.s(["default",()=>c]);var b=a.i(9771);function c(){return(0,b.jsx)("div",{className:"min-h-screen py-8 sm:py-12",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,b.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,b.jsx)("div",{className:"animate-pulse text-gray-600",children:"Loading products..."})})})})}},72031,a=>{"use strict";a.s(["default",()=>l],72031);var b=a.i(9771),c=a.i(80439),d=a.i(40925),e=a.i(74901),f=a.i(18433);let g=({rating:a,size:c="sm"})=>{let d={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},e=Math.floor(a),f=a-e>=.25&&a-e<.75;return(0,b.jsxs)("div",{className:"flex items-center",children:[[...Array(e)].map((a,e)=>(0,b.jsx)("svg",{className:`${d[c]} text-yellow-400`,fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},`full-${e}`)),f&&(0,b.jsxs)("svg",{className:`${d[c]} text-yellow-400`,fill:"currentColor",viewBox:"0 0 20 20",children:[(0,b.jsx)("defs",{children:(0,b.jsxs)("linearGradient",{id:"half-grad",x1:"0",x2:"100%",y1:"0",y2:"0",children:[(0,b.jsx)("stop",{offset:"50%",stopColor:"#facc15"}),(0,b.jsx)("stop",{offset:"50%",stopColor:"#d1d5db"})]})}),(0,b.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z",fill:"url(#half-grad)"})]},"half"),[...Array(5-e-!!f)].map((a,e)=>(0,b.jsx)("svg",{className:`${d[c]} text-gray-300`,fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},`empty-${e}`))]})},h=({product:a,reviews:h,addReview:i,variant:j="grid"})=>{let{name:k,description:l,category:m,image:n,id:o}=a,p=(0,e.useRouter)(),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),u=h.length>0?h.reduce((a,b)=>a+b.rating,0)/h.length:0,v=h.length,w=()=>{p.push(`/products/${o}`)},x=()=>{r(!0)};return"list"===j?(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 p-4 bg-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 cursor-pointer transform hover:scale-[1.02]",itemScope:!0,itemType:"https://schema.org/Product",children:[(0,b.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify({"@context":"https://schema.org","@type":"Product",name:k,description:l,category:m,image:n,brand:{"@type":"Brand",name:"Raaga Foods"}})}}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsx)("div",{className:"relative w-full md:w-32 aspect-square",children:(0,b.jsx)(d.default,{src:q?"/products/placeholder.jpg":n||"/products/placeholder.jpg",alt:`${k} - ${m} from Raaga Foods`,fill:!0,className:"rounded-lg object-cover transition-transform duration-300 hover:scale-110",sizes:"(max-width: 768px) 100vw, 128px",priority:!0,onError:x,itemProp:"image"})})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"flex justify-between items-start",children:(0,b.jsx)("span",{className:"inline-block px-2 py-1 text-sm bg-orange-100 text-orange-600 rounded-full",itemProp:"category",children:m})}),(0,b.jsx)("h3",{className:"mt-2 text-lg font-semibold text-gray-800",itemProp:"name",children:k}),(0,b.jsx)("p",{className:"mt-2 text-gray-600",itemProp:"description",children:l}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,b.jsx)(g,{rating:u,size:"sm"}),(0,b.jsx)("span",{className:"text-sm text-gray-800 font-semibold",children:u.toFixed(1)}),(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:["(",v," ",1===v?"review":"reviews",")"]}),(0,b.jsx)("button",{className:"ml-2 text-xs text-orange-600 underline hover:text-orange-800",onClick:()=>t(!0),type:"button",children:"Write Review"})]}),s&&(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(f.default,{productId:o,productName:k,onSubmit:a=>{i({...a,id:`user_review_${Date.now()}`,createdAt:new Date().toISOString(),helpfulVotes:0,totalVotes:0}),t(!1),alert("Thank you! Your review has been submitted successfully.")},onCancel:()=>t(!1)})})]})]}):(0,b.jsxs)("div",{className:"group bg-white rounded-lg shadow-md hover:shadow-xl transition-all duration-300 relative overflow-hidden cursor-pointer transform hover:scale-[1.02] max-w-5xl mx-auto px-4 py-12",onClick:w,role:"button",tabIndex:0,onKeyPress:a=>"Enter"===a.key&&w(),itemScope:!0,itemType:"https://schema.org/Product",children:[(0,b.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify({"@context":"https://schema.org","@type":"Product",name:k,description:l,category:m,image:n,brand:{"@type":"Brand",name:"Raaga Foods"}})}}),(0,b.jsx)("div",{className:"relative w-full aspect-square overflow-hidden ",children:(0,b.jsx)(d.default,{src:q?"/products/placeholder.jpg":n||"/products/placeholder.jpg",alt:`${k} - ${m} from Raaga Foods`,fill:!0,className:"rounded-t-lg object-cover transform group-hover:scale-110 transition-transform duration-500",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",priority:!0,onError:x,itemProp:"image"})}),(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,b.jsx)("span",{className:"inline-block px-2 py-1 text-sm bg-orange-100 text-orange-600 rounded-full",itemProp:"category",children:m})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",itemProp:"name",children:k}),(0,b.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 group-hover:text-orange-600 transition-colors duration-300",itemProp:"description",children:l}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,b.jsx)(g,{rating:u,size:"sm"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-gray-800",children:u.toFixed(1)}),(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:["(",v," ",1===v?"review":"reviews",")"]})]}),s&&(0,b.jsx)("div",{className:"mt-4",onClick:a=>a.stopPropagation()}),(0,b.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100 transform opacity-0 max-h-0 group-hover:max-h-20 group-hover:opacity-100 transition-all duration-300",children:(0,b.jsx)("div",{className:"flex justify-between items-center"})})]})]})};var i=a.i(26375),j=a.i(90225),k=a.i(7497);function l({selectedCategory:a}){let{searchQuery:d}=(0,i.useSearch)(),[e,f]=(0,c.useState)([]),[g,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(8),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)([]);(0,c.useEffect)(()=>{(async()=>{try{let a=[];for(let b of j.products)try{let c=await k.default.getReviews(b.id);c.success&&c.data?.reviews&&(a=a.concat(c.data.reviews))}catch(a){console.error(`Failed to load reviews for product ${b.id}:`,a)}r(a)}catch(a){console.error("Failed to load all reviews:",a)}})()},[]);let s=a=>{r(b=>[a,...b])};(0,c.useEffect)(()=>{n(8)},[d,a]),(0,c.useEffect)(()=>{l(!!d.trim());let b=Array.from(new Map(j.products.map(a=>[a.id,a])).values());if(console.log("Initial products loaded:",b.length),a&&console.log("After category filter:",(b="veg"===a.toLowerCase()?b.filter(a=>!(a.tags?.some(a=>"non-veg"===a.toLowerCase())||a.name.toLowerCase().includes("chicken")||a.name.toLowerCase().includes("mutton")||a.name.toLowerCase().includes("fish"))):"non-veg"===a.toLowerCase()?b.filter(a=>a.tags?.some(a=>a.toLowerCase().includes("non-veg"))||a.name.toLowerCase().includes("non-veg")||a.description.toLowerCase().includes("non-vegetarian")):b.filter(b=>b.category===a)).length,"for category:",a),d.trim()){let a=d.toLowerCase(),c=a.split(" ").filter(a=>a.length>0);(b=(b=Array.from(new Map(b.map(a=>[a.id,a])).values())).filter(a=>{let b=a.name.toLowerCase();return c.every(a=>b.includes(a))})).sort((b,d)=>{let e=b.name.toLowerCase(),f=d.name.toLowerCase();if(e===a)return -1;if(f===a)return 1;let g=e.startsWith(c[0]),h=f.startsWith(c[0]);return g&&!h?-1:!g&&h?1:e.localeCompare(f)}),console.log("After search filter:",b.length,"for query:",d)}console.log("Final filtered products:",b.length),p(b),f([{category:"All Products",items:b.slice(0,m)}])},[m,d,a]);let t=o.length>m;return(console.log("ProductsList state:",{displayCount:m,allProductsLength:o.length,hasMoreProducts:t,searchResultsLength:e[0]?.items.length}),0!==e.length||d||a)?(0,b.jsxs)("div",{className:"w-full",children:[(g||a)&&(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsx)("h3",{className:"text-lg text-gray-600 mb-2",children:g?e[0]?.items.length>0?(0,b.jsxs)("span",{children:[(0,b.jsx)("strong",{children:e[0].items.length})," ",1===e[0].items.length?"product":"products"," matching “",(0,b.jsx)("strong",{children:d}),"”",a?` in ${a}`:""]}):(0,b.jsxs)(b.Fragment,{children:["No products found matching “",d,"”"]}):a?`Showing ${e[0]?.items.length||0} products in ${a}`:null})}),(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4  gap-4 sm:gap-6 ",children:e[0]?.items.map(a=>{let c;return(0,b.jsx)("div",{className:"w-full ",children:(0,b.jsx)(h,{product:a,reviews:(c=a.id,q.filter(a=>a.productId===c)),addReview:s})},a.id)})}),t&&(0,b.jsxs)("div",{className:"flex justify-between items-center mt-8",children:[(0,b.jsxs)("span",{className:"text-sm text-gray-500",children:["Showing ",e[0]?.items.length||0," of ",o.length," products"]}),(0,b.jsxs)("button",{onClick:()=>{n(a=>{let b=a+8;return console.log("Loading more products:",{prev:a,newCount:b,totalProducts:o.length}),b})},className:"px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors duration-300 flex items-center gap-2",children:[(0,b.jsx)("span",{children:"Load More"}),(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]})]})]}):(0,b.jsx)("div",{className:"w-full text-center py-12",children:(0,b.jsx)("p",{className:"text-gray-600 text-lg animate-pulse",children:"Loading products..."})})}},28460,a=>{"use strict";a.s(["default",()=>g]);var b=a.i(9771),c=a.i(74901),d=a.i(80439),e=a.i(72031),f=a.i(54522);function g(){let a=(0,c.useSearchParams)().get("category"),[g,h]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{if(!g&&document.referrer.includes("/products/")){let a=document.querySelector("nav"),b=a?a.getBoundingClientRect().height:0;window.scrollTo({top:Math.max(0,window.scrollY-b-16),behavior:"smooth"}),h(!0)}},[g]),(0,b.jsx)(d.Suspense,{fallback:(0,b.jsx)(f.default,{}),children:(0,b.jsx)("div",{className:"min-h-screen py-8 sm:py-12",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex justify-between items-center",children:(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-800",children:a?`${a} Products`:"All Products"})}),(0,b.jsx)(e.default,{selectedCategory:a||void 0})]})})})})}}];

//# sourceMappingURL=Downloads_raagafoods%20%282%29_raagafoods_src_8fb99f68._.js.map